<!doctype html>
<html lang="en" class="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Dar ul Uloom Discord â€” Books</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: 'class',
      };
    </script>
  </head>
  <body class="bg-gray-950 text-white">
    <header class="sticky top-0 z-40 bg-gray-900/80 backdrop-blur border-b border-teal-500/30">
      <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between py-4">
          <a href="/" class="flex items-center gap-3">
            <img
              src="https://i.ibb.co/whp5h8ky/Gemini-Generated-Image-e7auwie7auwie7au.png"
              alt="Dar ul Uloom Discord"
              class="h-10 w-10 rounded-full ring-2 ring-teal-400/60 shadow-[0_0_20px_rgba(45,212,191,0.35)]"
            />
            <span class="text-xl font-semibold tracking-wide text-white">
              <span class="text-teal-300">Dar ul Uloom</span>
              <span class="text-fuchsia-300">Discord</span>
            </span>
          </a>

          <nav class="flex items-center gap-6">
            <a href="/" class="text-sm font-medium text-gray-300 hover:text-white transition-colors">Home</a>
            <a href="/books.html" class="text-sm font-medium text-gray-300 hover:text-white transition-colors">Books</a>
            <a
              href="https://discord.com"
              target="_blank"
              rel="noopener noreferrer"
              class="group inline-flex items-center gap-2 rounded-md border border-teal-500/40 bg-gray-800/50 px-4 py-2 text-sm font-semibold text-white shadow-[0_0_20px_rgba(45,212,191,0.25)] transition-all hover:bg-gray-800 hover:border-teal-400 hover:shadow-[0_0_30px_rgba(217,70,239,0.35)]"
            >
              <span class="h-2 w-2 rounded-full bg-teal-400 shadow-[0_0_10px_rgba(45,212,191,0.8)] group-hover:bg-fuchsia-400 group-hover:shadow-[0_0_10px_rgba(217,70,239,0.8)]"></span>
              Join Now
            </a>
          </nav>
        </div>
      </div>
    </header>

    <main class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-12">
      <div class="flex items-center justify-between mb-6">
        <h1 id="title" class="text-2xl font-bold">
          <span class="bg-gradient-to-r from-teal-300 via-fuchsia-400 to-teal-300 bg-clip-text text-transparent">
            Categories
          </span>
        </h1>
        <button
          id="backBtn"
          class="inline-flex items-center gap-2 rounded-md px-4 py-2 text-sm font-semibold border transition-all border-gray-700 bg-gray-800/50 text-gray-500 cursor-not-allowed"
          disabled
        >
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-teal-300" viewBox="0 0 20 20" fill="currentColor">
            <path d="M17 10a1 1 0 01-1 1H7.414l2.293 2.293a1 1 0 11-1.414 1.414L3.05 10.464a1 1 0 010-1.414l5.243-5.243a1 1 0 111.414 1.414L7.414 9H16a1 1 0 011 1z" />
          </svg>
          Back
        </button>
      </div>

      <p id="hint" class="text-gray-300 mb-8">
        Select a category to drill down.
      </p>

      <div id="grid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6"></div>

      <div id="empty" class="mt-12 text-center text-gray-400 hidden">
        No items found in this section.
      </div>
    </main>

    <script type="application/json" id="library">
      {
        "Fiqh": {
          "Hanafi": [
            "Al-Hidayah",
            "Mukhtasar al-Quduri"
          ],
          "Shafi'i": [
            "Al-Umm"
          ]
        },
        "Hadith": {
          "Sahih": [
            "Sahih al-Bukhari",
            "Sahih Muslim"
          ]
        },
        "Aqidah": {
          "Ashari": [
            "Al-Irshad ila Qawati al-Adillah"
          ],
          "Maturidi": [
            "Kitab at-Tawhid"
          ],
          "Athari": [
            "Al-Ibana 'an Usul ad-Diyanah"
          ]
        }
      }
    </script>

    <script>
      // State
      const pathStack = [];
      let loaded = false;

      function getLibrary() {
        const el = document.getElementById('library');
        return JSON.parse(el.textContent);
      }

      function getCurrentNode(library) {
        return pathStack.reduce((acc, key) => {
          if (acc && typeof acc === 'object' && key in acc) return acc[key];
          return acc;
        }, library);
      }

      function render() {
        const grid = document.getElementById('grid');
        const empty = document.getElementById('empty');
        const title = document.getElementById('title');
        const hint = document.getElementById('hint');
        const backBtn = document.getElementById('backBtn');
        const library = getLibrary();
        const current = getCurrentNode(library);
        const isLeaf = Array.isArray(current);

        title.innerHTML =
          '<span class="bg-gradient-to-r from-teal-300 via-fuchsia-400 to-teal-300 bg-clip-text text-transparent">' +
          (pathStack.length === 0 ? 'Categories' : pathStack.join(' / ')) +
          '</span>';

        hint.textContent = isLeaf
          ? 'Books'
          : pathStack.length === 0
          ? 'Select a category to drill down.'
          : 'Select a sub-category or book list.';

        backBtn.disabled = pathStack.length === 0;
        backBtn.className =
          'inline-flex items-center gap-2 rounded-md px-4 py-2 text-sm font-semibold border transition-all ' +
          (pathStack.length === 0
            ? 'border-gray-700 bg-gray-800/50 text-gray-500 cursor-not-allowed'
            : 'border-teal-500/40 bg-gray-800/50 text-white hover:border-fuchsia-400 hover:shadow-[0_0_25px_rgba(217,70,239,0.35)]');

        // Items
        let items = [];
        if (isLeaf) {
          items = current;
        } else if (current && typeof current === 'object') {
          items = Object.keys(current);
        }

        grid.innerHTML = '';
        empty.classList.add('hidden');

        if (items.length === 0) {
          empty.classList.remove('hidden');
          return;
        }

        items.forEach((item, i) => {
          const card = document.createElement('div');
          card.className =
            'rounded-xl border border-teal-500/30 bg-gray-900/60 p-5 shadow-[0_0_30px_rgba(45,212,191,0.15)] transform transition-all ' +
            (loaded ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-2');

          const header = document.createElement('div');
          header.className = 'flex items-center justify-between';

          const h3 = document.createElement('h3');
          h3.className = 'text-lg font-semibold';
          h3.innerHTML = '<span class="text-white">' + item + '</span>';

          header.appendChild(h3);

          if (!isLeaf) {
            const btn = document.createElement('button');
            btn.className =
              'inline-flex items-center gap-2 rounded-md border border-fuchsia-500/40 bg-gray-800/50 px-3 py-1.5 text-xs font-semibold text-white shadow-[0_0_20px_rgba(217,70,239,0.25)] transition-all hover:bg-gray-800 hover:border-teal-400 hover:shadow-[0_0_25px_rgba(45,212,191,0.35)]';
            btn.innerHTML =
              'View <span class="h-1.5 w-1.5 rounded-full bg-fuchsia-400 shadow-[0_0_10px_rgba(217,70,239,0.8)]"></span>';
            btn.addEventListener('click', () => {
              pathStack.push(item);
              render();
            });
            header.appendChild(btn);
          }

          card.appendChild(header);

          if (isLeaf) {
            const list = document.createElement('ul');
            list.className = 'mt-4 space-y-2';

            const label = document.createElement('li');
            label.className = 'text-xs text-gray-400';
            label.textContent = 'Titles:';
            list.appendChild(label);

            current.forEach((book) => {
              const li = document.createElement('li');
              li.className = 'rounded-md bg-gray-800/50 px-3 py-2 text-sm text-gray-200 border border-gray-700/50';
              li.textContent = book;
              list.appendChild(li);
            });

            card.appendChild(list);
          }

          grid.appendChild(card);

          setTimeout(() => {
            card.classList.remove('opacity-0', 'translate-y-2');
            card.classList.add('opacity-100', 'translate-y-0');
          }, 60 + i * 90);
        });
      }

      document.getElementById('backBtn').addEventListener('click', () => {
        if (pathStack.length > 0) {
          pathStack.pop();
          render();
        }
      });

      window.addEventListener('DOMContentLoaded', () => {
        loaded = true;
        render();
      });
    </script>
  </body>
</html>